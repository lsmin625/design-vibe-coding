# 스케치 코드 - 일반 고객

## 프롬프트

상품 목록 및 탐색 화면(ProductListView) 스케치 코드를 Vue 3기반 Composition API script setup 방식으로 구현한다.

```yaml
component:
  name: ProductListView
  route: /products
  description: >
    OSS 패러디 디자인 굿즈 전체 탐색/검색 홈.
    - 상단 검색/필터 바
    - 상품 카드 그리드
    - 페이지네이션(더보기)
    - 로그인 없이도 접근 가능
    - 장바구니/상세 페이지로 이동 허브 역할

  # =========================
  # 1. STATE (Composition API)
  # =========================
  state:
    refs:
      searchKeyword: string            # 검색어 텍스트
      selectedCategory: string         # 카테고리 드롭다운 선택값
      sortOption: string               # 정렬 옵션 (popularity | newest | donationRate 등)
      priceRange:                      # 가격대 필터 (min/max)
        min: number
        max: number
      products:                        # 서버에서 가져온 상품 리스트
        - id: string
          thumbnailUrl: string
          title: string
          shortDesc: string            # 짧은 컨셉 설명 (밈/패러디 포인트)
          price: number
          likes: number                # 인기 지표 예: 좋아요/찜
          salesCount: number           # 누적 판매 수량
          donationRate: number         # 기부율 (%)
          designer:
            id: string
            nickname: string
      isLoading: boolean               # 로딩 스피너 제어
      currentPage: number
      totalPages: number

    reactive:
      filters:
        categoryList:                  # UI 렌더용 카테고리 목록
          - { value: "all", label: "전체" }
          - { value: "tshirt", label: "티셔츠" }
          - { value: "sticker", label: "스티커" }
          - { value: "mug", label: "머그컵" }
        sortOptions:
          - { value: "popularity", label: "인기순" }
          - { value: "newest", label: "신상품순" }
          - { value: "donation", label: "기부율높은순" }

  # =========================
  # 2. PROPS / EMITS
  # =========================
  props: {}
  emits:
    - selectProduct    # 상품 카드를 클릭했을 때 productId를 emit
    - addToCart        # (선택) 카드 내 장바구니 버튼을 눌렀을 때 productId emit

  # =========================
  # 3. LAYOUT STRUCTURE (template 영역)
  # =========================
  template:
    root:
      tag: div
      class:
        - "container py-4"
        - "product-list-view"
        - "bg-body"                      # Bootstrap body bg (can map to token later)
      children:

        # 3.1 페이지 헤더 (타이틀 + 서브텍스트)
        - tag: header
          class:
            - "mb-4"
          children:
            - tag: h1
              class:
                - "h4 fw-bold mb-1"
                - "text-primary"
              text: "디자인 굿즈 탐색"
            - tag: p
              class:
                - "text-muted small mb-0"
              text: "오픈소스 패러디 굿즈를 발견하고, 창작자와 프로젝트에 기여하세요."

        # 3.2 필터/검색 영역 (카드 형태)
        - tag: section
          class:
            - "card shadow-sm mb-4 border-0"
          children:
            - tag: div
              class:
                - "card-body"
              children:
                - tag: form
                  class:
                    - "row gy-3 gx-3 align-items-end"
                  attrs:
                    @submit.prevent: "applyFilters"
                  children:

                    # 검색어 입력
                    - tag: div
                      class: ["col-12", "col-md-4"]
                      children:
                        - tag: label
                          class: ["form-label", "small", "fw-semibold"]
                          attrs:
                            for: "searchKeyword"
                          text: "검색어"
                        - tag: input
                          class: ["form-control", "form-control-sm"]
                          attrs:
                            id: "searchKeyword"
                            type: "text"
                            v-model: "searchKeyword"
                            placeholder: "예: kubernetes 밈 티셔츠"
                            :style: "{ fontSize: 'var(--token-font-size-body-sm)' }"

                    # 카테고리
                    - tag: div
                      class: ["col-6", "col-md-2"]
                      children:
                        - tag: label
                          class: ["form-label", "small", "fw-semibold"]
                          attrs:
                            for: "categorySelect"
                          text: "카테고리"
                        - tag: select
                          class: ["form-select", "form-select-sm"]
                          attrs:
                            id: "categorySelect"
                            v-model: "selectedCategory"
                          children:
                            - loop: filters.categoryList
                              tag: option
                              attrs:
                                :value: "item.value"
                              textBind: "item.label"

                    # 정렬
                    - tag: div
                      class: ["col-6", "col-md-2"]
                      children:
                        - tag: label
                          class: ["form-label", "small", "fw-semibold"]
                          attrs:
                            for: "sortSelect"
                          text: "정렬"
                        - tag: select
                          class: ["form-select", "form-select-sm"]
                          attrs:
                            id: "sortSelect"
                            v-model: "sortOption"
                          children:
                            - loop: filters.sortOptions
                              tag: option
                              attrs:
                                :value: "opt.value"
                              textBind: "opt.label"

                    # 가격 (min/max)
                    - tag: div
                      class: ["col-6", "col-md-2"]
                      children:
                        - tag: label
                          class: ["form-label", "small", "fw-semibold"]
                          text: "최소 가격 (₩)"
                        - tag: input
                          class: ["form-control", "form-control-sm"]
                          attrs:
                            type: "number"
                            min: "0"
                            v-model.number: "priceRange.min"
                    - tag: div
                      class: ["col-6", "col-md-2"]
                      children:
                        - tag: label
                          class: ["form-label", "small", "fw-semibold"]
                          text: "최대 가격 (₩)"
                        - tag: input
                          class: ["form-control", "form-control-sm"]
                          attrs:
                            type: "number"
                            min: "0"
                            v-model.number: "priceRange.max"

                    # 적용 버튼
                    - tag: div
                      class: ["col-12", "col-md-12", "text-end"]
                      children:
                        - tag: button
                          class:
                            - "btn btn-primary btn-sm px-3"
                            - "fw-semibold"
                          attrs:
                            type: "submit"
                          text: "필터 적용"

        # 3.3 결과 리스트 영역
        - tag: section
          class:
            - "row g-3"
          children:
            - loop: products
              tag: div
              class:
                - "col-6 col-md-4 col-lg-3"
              children:
                - tag: article
                  class:
                    - "card h-100 border-0 shadow-sm"
                    - "product-card"
                  attrs:
                    @click: "$emit('selectProduct', item.id)"
                    :style: "{ cursor: 'pointer', backgroundColor: 'var(--token-surface-card)' }"
                  children:

                    # 썸네일
                    - tag: div
                      class:
                        - "ratio ratio-1x1 bg-light"
                        - "rounded-top"
                      attrs:
                        :style: "{ backgroundColor: 'var(--token-surface-image-bg)' }"
                      children:
                        - tag: img
                          class:
                            - "w-100 h-100 object-fit-cover rounded-top"
                          attrs:
                            :src: "item.thumbnailUrl"
                            :alt: "item.title"

                    # 카드 본문
                    - tag: div
                      class:
                        - "card-body d-flex flex-column"
                      children:
                        - tag: h2
                          class:
                            - "fs-6 fw-semibold mb-1 text-truncate"
                            - "product-title"
                          attrs:
                            :style: "{ color: 'var(--token-text-strong)' }"
                          textBind: "item.title"

                        - tag: p
                          class:
                            - "text-muted small mb-2 text-truncate-2"
                            - "product-desc"
                          attrs:
                            :style: "{ color: 'var(--token-text-secondary)' }"
                          textBind: "item.shortDesc"

                        # 디자이너 / 기부율 줄
                        - tag: div
                          class:
                            - "d-flex justify-content-between align-items-center mb-2"
                            - "small"
                          children:
                            - tag: span
                              class:
                                - "text-muted text-truncate me-1"
                              attrs:
                                :style: "{ color: 'var(--token-text-tertiary)' }"
                              textBind: "item.designer.nickname"
                            - tag: span
                              class:
                                - "badge rounded-pill bg-success-subtle text-success-emphasis"
                                - "donation-badge"
                              attrs:
                                :style: "{ backgroundColor: 'var(--token-badge-donation-bg)', color: 'var(--token-badge-donation-fg)'}"
                              textBind: "'기부 ' + item.donationRate + '%'"

                        # 가격 + 인기지표 줄
                        - tag: div
                          class:
                            - "d-flex justify-content-between align-items-end mt-auto"
                          children:
                            - tag: div
                              class:
                                - "fw-bold"
                                - "price-label"
                              attrs:
                                :style: "{ color: 'var(--token-text-price)' }"
                              textBind: "'₩ ' + item.price.toLocaleString()"
                            - tag: div
                              class:
                                - "text-muted small text-end"
                              attrs:
                                :style: "{ color: 'var(--token-text-tertiary)' }"
                              textBind: "item.likes + ' ❤️ / ' + item.salesCount + ' sold'"

                        # 장바구니 담기 버튼
                        - tag: button
                          class:
                            - "btn btn-outline-primary btn-sm w-100 mt-3"
                            - "add-cart-btn"
                          attrs:
                            type: "button"
                            @click.stop: "$emit('addToCart', item.id)"
                            :style: "{ borderColor: 'var(--token-action-primary)', color: 'var(--token-action-primary)' }"
                          text: "장바구니 담기"

        # 3.4 페이지네이션 / 더보기
        - tag: div
          class:
            - "text-center py-4"
          children:
            - tag: button
              class:
                - "btn btn-light border btn-sm px-4"
              attrs:
                type: "button"
                :disabled: "isLoading || currentPage >= totalPages"
                @click: "loadMore"
                :style: "{ backgroundColor: 'var(--token-surface-pagecontrol)', borderColor: 'var(--token-border-muted)' }"
              textBind: "isLoading ? '불러오는 중...' : '더 보기'"

  # =========================
  # 4. SCRIPT LOGIC (Composition API 개념 설계)
  # =========================
  script:
    imports:
      vue:
        - ref
        - reactive
        - onMounted
      vueRouter:
        - useRouter
        - useRoute
    setup:
      description: >
        - 라우터 쿼리(param: category, sort 등)를 읽어 초기 필터 상태를 설정
        - API 호출(fetchProducts)로 products 갱신
        - loadMore()는 currentPage 증가 후 append
        - applyFilters()는 currentPage=1로 리셋 후 다시 fetch
      methods:
        applyFilters:
          summary: >
            선택된 검색조건/필터/정렬 옵션을 기반으로 상품 목록을 다시 조회한다.
        fetchProducts:
          summary: >
            서버/스토어에서 상품 데이터를 가져와 products state를 업데이트한다.
        loadMore:
          summary: >
            다음 페이지를 불러와 products 리스트 뒤에 추가한다.
        goToDetail:
          summary: >
            $emit('selectProduct', productId) 후 라우터로 /products/:id 이동 가능.
      lifecycle:
        onMounted:
          - "fetchProducts()"

  # =========================
  # 5. STYLE (scoped) & TOKENS
  # =========================
  style:
    scoped: true
    tokens:
      # Figma Tokens → Style Dictionary → :root { --token-* } 로 변환되는 것을 가정
      # 여기서는 뷰 단에서 참조할 토큰 명세만 정의
      color:
        text-strong:        "#1a1a1a"        # var(--token-text-strong)
        text-secondary:     "#6c757d"        # var(--token-text-secondary)  (bs text-muted 계열)
        text-tertiary:      "#adb5bd"        # 회색 보조 텍스트
        text-price:         "#212529"        # 진한 본문색 (가격 강조)
        surface-card:       "#ffffff"        # 카드 배경
        surface-image-bg:   "#f8f9fa"        # 썸네일 placeholder BG
        badge-donation-bg:  "#e6f4ea"        # 기부율 뱃지 BG (연한 그린)
        badge-donation-fg:  "#198754"        # 기부율 뱃지 FG (bootstrap text-success 계열)
        action-primary:     "#0d6efd"        # 메인 브랜드 컬러 (btn-primary와 align)
        surface-pagecontrol:"#ffffff"
        border-muted:       "#dee2e6"
      radius:
        card-radius:        "0.5rem"         # rounded
      font:
        size-body-sm:       "0.875rem"       # 14px
    local_css:
      # Bootstrap 유틸리티로 안 되는 부분 (2줄 말줄임 등)만 최소한으로 정의
      - selector: ".product-desc.text-truncate-2"
        rules:
          - "display: -webkit-box;"
          - "-webkit-line-clamp: 2;"
          - "-webkit-box-orient: vertical;"
          - "overflow: hidden;"

      - selector: ".product-card"
        rules:
          - "border-radius: var(--token-radius-card-radius);"
          - "transition: box-shadow .15s ease;"
      - selector: ".product-card:hover"
        rules:
          - "box-shadow: 0 .5rem 1rem rgba(0,0,0,.08);"

      - selector: ".add-cart-btn"
        rules:
          - "font-weight: 600;"

      - selector: ".price-label"
        rules:
          - "font-size: 0.9rem;"

      - selector: ".donation-badge"
        rules:
          - "font-size: 0.7rem;"
          - "font-weight: 600;"

```

---

## AI 응답

### 상품 목록 및 탐색 화면(ProductListView.vue) 컴포넌트

```vue
<!-- ProductListView.vue -->
<template>
  <div class="container py-4 product-list-view bg-body">
    <!-- 3.1 페이지 헤더 -->
    <header class="mb-4">
      <h1 class="h4 fw-bold mb-1 text-primary">디자인 굿즈 탐색</h1>
      <p class="text-muted small mb-0">
        오픈소스 패러디 굿즈를 발견하고, 창작자와 프로젝트에 기여하세요.
      </p>
    </header>

    <!-- 3.2 필터/검색 영역 -->
    <section class="card shadow-sm mb-4 border-0">
      <div class="card-body">
        <form
          class="row gy-3 gx-3 align-items-end"
          @submit.prevent="applyFilters"
        >
          <!-- 검색어 -->
          <div class="col-12 col-md-4">
            <label
              for="searchKeyword"
              class="form-label small fw-semibold"
            >
              검색어
            </label>
            <input
              id="searchKeyword"
              type="text"
              class="form-control form-control-sm"
              v-model="searchKeyword"
              placeholder="예: kubernetes 밈 티셔츠"
              :style="{ fontSize: 'var(--token-font-size-body-sm)' }"
            />
          </div>

          <!-- 카테고리 -->
          <div class="col-6 col-md-2">
            <label
              for="categorySelect"
              class="form-label small fw-semibold"
            >
              카테고리
            </label>
            <select
              id="categorySelect"
              class="form-select form-select-sm"
              v-model="selectedCategory"
            >
              <option
                v-for="item in filters.categoryList"
                :key="item.value"
                :value="item.value"
              >
                {{ item.label }}
              </option>
            </select>
          </div>

          <!-- 정렬 -->
          <div class="col-6 col-md-2">
            <label
              for="sortSelect"
              class="form-label small fw-semibold"
            >
              정렬
            </label>
            <select
              id="sortSelect"
              class="form-select form-select-sm"
              v-model="sortOption"
            >
              <option
                v-for="opt in filters.sortOptions"
                :key="opt.value"
                :value="opt.value"
              >
                {{ opt.label }}
              </option>
            </select>
          </div>

          <!-- 최소 가격 -->
          <div class="col-6 col-md-2">
            <label class="form-label small fw-semibold">
              최소 가격 (₩)
            </label>
            <input
              type="number"
              min="0"
              class="form-control form-control-sm"
              v-model.number="priceRange.min"
            />
          </div>

          <!-- 최대 가격 -->
          <div class="col-6 col-md-2">
            <label class="form-label small fw-semibold">
              최대 가격 (₩)
            </label>
            <input
              type="number"
              min="0"
              class="form-control form-control-sm"
              v-model.number="priceRange.max"
            />
          </div>

          <!-- 적용 버튼 -->
          <div class="col-12 col-md-12 text-end">
            <button
              type="submit"
              class="btn btn-primary btn-sm px-3 fw-semibold"
            >
              필터 적용
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- 3.3 상품 카드 그리드 -->
    <section class="row g-3">
      <div
        v-for="item in products"
        :key="item.id"
        class="col-6 col-md-4 col-lg-3"
      >
        <article
          class="card h-100 border-0 shadow-sm product-card"
          :style="{
            cursor: 'pointer',
            backgroundColor: 'var(--token-surface-card)'
          }"
          @click="$emit('selectProduct', item.id)"
        >
          <!-- 썸네일 -->
          <div
            class="ratio ratio-1x1 bg-light rounded-top"
            :style="{ backgroundColor: 'var(--token-surface-image-bg)' }"
          >
            <img
              class="w-100 h-100 object-fit-cover rounded-top"
              :src="item.thumbnailUrl"
              :alt="item.title"
            />
          </div>

          <!-- 카드 본문 -->
          <div class="card-body d-flex flex-column">
            <!-- 제목 -->
            <h2
              class="fs-6 fw-semibold mb-1 text-truncate product-title"
              :style="{ color: 'var(--token-text-strong)' }"
            >
              {{ item.title }}
            </h2>

            <!-- 짧은 설명 -->
            <p
              class="text-muted small mb-2 text-truncate-2 product-desc"
              :style="{ color: 'var(--token-text-secondary)' }"
            >
              {{ item.shortDesc }}
            </p>

            <!-- 디자이너 / 기부율 -->
            <div
              class="d-flex justify-content-between align-items-center mb-2 small"
            >
              <span
                class="text-muted text-truncate me-1"
                :style="{ color: 'var(--token-text-tertiary)' }"
              >
                {{ item.designer.nickname }}
              </span>

              <span
                class="badge rounded-pill bg-success-subtle text-success-emphasis donation-badge"
                :style="{
                  backgroundColor: 'var(--token-badge-donation-bg)',
                  color: 'var(--token-badge-donation-fg)'
                }"
              >
                {{ '기부 ' + item.donationRate + '%' }}
              </span>
            </div>

            <!-- 가격 / 인기지표 -->
            <div
              class="d-flex justify-content-between align-items-end mt-auto"
            >
              <div
                class="fw-bold price-label"
                :style="{ color: 'var(--token-text-price)' }"
              >
                ₩ {{ formatPrice(item.price) }}
              </div>

              <div
                class="text-muted small text-end"
                :style="{ color: 'var(--token-text-tertiary)' }"
              >
                {{ item.likes }} ❤️ / {{ item.salesCount }} sold
              </div>
            </div>

            <!-- 장바구니 버튼 -->
            <button
              type="button"
              class="btn btn-outline-primary btn-sm w-100 mt-3 add-cart-btn"
              @click.stop="$emit('addToCart', item.id)"
              :style="{
                borderColor: 'var(--token-action-primary)',
                color: 'var(--token-action-primary)'
              }"
            >
              장바구니 담기
            </button>
          </div>
        </article>
      </div>
    </section>

    <!-- 3.4 더 보기 -->
    <div class="text-center py-4">
      <button
        type="button"
        class="btn btn-light border btn-sm px-4"
        :disabled="isLoading || currentPage >= totalPages"
        @click="loadMore"
        :style="{
          backgroundColor: 'var(--token-surface-pagecontrol)',
          borderColor: 'var(--token-border-muted)'
        }"
      >
        {{ isLoading ? '불러오는 중...' : '더 보기' }}
      </button>
    </div>
  </div>
</template>

<script setup>
/**
 * ProductListView
 * - OSS 패러디 굿즈 탐색/검색 메인 화면
 * - 로그인 없이 접근 가능
 * - emits:
 *    - selectProduct(productId: string)
 *    - addToCart(productId: string)
 */

import { ref, reactive, onMounted } from 'vue'
import { useRouter, useRoute } from 'vue-router'

const emit = defineEmits(['selectProduct', 'addToCart'])

// ===========================
// 1. STATE
// ===========================
const searchKeyword = ref('')
const selectedCategory = ref('all')
const sortOption = ref('popularity')

const priceRange = reactive({
  min: 0,
  max: 0
})

const products = ref([
  // 초기 더미. 실제 구현 단계에서는 fetchProducts()로 교체
  {
    id: 'p001',
    thumbnailUrl: 'https://placehold.co/400x400?text=K8s+Meme',
    title: '쿠버네티스 혼돈 모드 티셔츠',
    shortDesc: '쿠버네티스가 밤새 죽고 살아나는 그 감정... 그대로 담았습니다.',
    price: 32000,
    likes: 128,
    salesCount: 57,
    donationRate: 10,
    designer: {
      id: 'd01',
      nickname: 'dev_panda'
    }
  },
  {
    id: 'p002',
    thumbnailUrl: 'https://placehold.co/400x400?text=Linux+Penguin',
    title: 'sudo rm -rf / 후회 머그컵',
    shortDesc: 'Tux가 멘붕 온 얼굴로 커피를 들고 있는 블랙유머 컵',
    price: 18000,
    likes: 412,
    salesCount: 230,
    donationRate: 7,
    designer: {
      id: 'd02',
      nickname: 'rootcoffee'
    }
  }
])

const isLoading = ref(false)
const currentPage = ref(1)
const totalPages = ref(5)

const filters = reactive({
  categoryList: [
    { value: 'all', label: '전체' },
    { value: 'tshirt', label: '티셔츠' },
    { value: 'sticker', label: '스티커' },
    { value: 'mug', label: '머그컵' }
  ],
  sortOptions: [
    { value: 'popularity', label: '인기순' },
    { value: 'newest', label: '신상품순' },
    { value: 'donation', label: '기부율높은순' }
  ]
})

// ===========================
// 2. ROUTER
// ===========================
const router = useRouter()
const route = useRoute()

// URL 쿼리를 기반으로 초기 필터 세팅 (ex. /products?category=tshirt&sort=newest)
onMounted(() => {
  if (route.query.category && typeof route.query.category === 'string') {
    selectedCategory.value = route.query.category
  }
  if (route.query.sort && typeof route.query.sort === 'string') {
    sortOption.value = route.query.sort
  }

  fetchProducts()
})

// ===========================
// 3. METHODS (Composition API)
// ===========================
function applyFilters() {
  // 1) 페이지 리셋
  currentPage.value = 1
  // 2) 상품 다시 가져오기
  fetchProducts()
  // 3) 라우터 쿼리 동기화 (검색 공유/북마크 가능하도록)
  router.replace({
    path: '/products',
    query: {
      category: selectedCategory.value,
      sort: sortOption.value,
      q: searchKeyword.value || undefined,
      min: priceRange.min || undefined,
      max: priceRange.max || undefined
    }
  })
}

async function fetchProducts() {
  // 실제 구현 시:
  // - API 호출 파라미터: searchKeyword, selectedCategory, sortOption, priceRange, currentPage
  // - 결과: products.value, totalPages.value 업데이트
  //
  // 여기서는 스케치 단계이므로 isLoading 토글/설명만 유지
  isLoading.value = true

  // TODO: axios/fetch 등으로 데이터 받아온다고 가정
  // products.value = [...]
  // totalPages.value = response.totalPages

  // 데모를 위해 약간의 상태 변화만
  // (실제 네트워크 호출 로직은 프로토타이핑 단계에서 구현)
  isLoading.value = false
}

async function loadMore() {
  if (currentPage.value >= totalPages.value) return

  isLoading.value = true
  currentPage.value = currentPage.value + 1

  // TODO: 다음 페이지 fetch 후 products 뒤에 push
  // const nextItems = await api(...)
  // products.value.push(...nextItems)

  isLoading.value = false
}

// 상세 이동 유틸 (현재 템플릿에선 card click에서 emit만 하지만,
// 라우터 이동을 직접 쓰고 싶을 때 사용 가능)
function goToDetail(productId) {
  emit('selectProduct', productId)
  router.push(`/products/${productId}`)
}

// ===========================
// 4. HELPERS
// ===========================
function formatPrice(value) {
  // "32000" -> "32,000"
  if (typeof value !== 'number') return value
  return value.toLocaleString()
}
</script>

<style scoped>
/* =========================
   Token variables (예: style-dictionary 결과물)
   실제 빌드에서는 :root 등에 존재한다고 가정
   여기서는 참조만 → 커스텀 CSS는 최소화
========================= */
/* 예시: 2줄 말줄임 */
.product-desc.text-truncate-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* 카드 radius / hover 효과 */
.product-card {
  border-radius: var(--token-radius-card-radius);
  transition: box-shadow 0.15s ease;
}
.product-card:hover {
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.08);
}

/* 장바구니 버튼 타이포 */
.add-cart-btn {
  font-weight: 600;
}

/* 가격 라벨 강조 */
.price-label {
  font-size: 0.9rem;
}

/* 기부율 뱃지 사이즈 */
.donation-badge {
  font-size: 0.7rem;
  font-weight: 600;
}
</style>

```